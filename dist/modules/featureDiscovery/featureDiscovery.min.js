app.register({featureDiscovery:{registerTemplates:function(){app.core.ui.addTemplate("app","infos",app.config.liftJsPath+"js/modules/featureDiscovery/views/infos.html"),app.core.ui.addTemplate("content","settings",app.config.liftJsPath+"js/modules/featureDiscovery/views/settings.html")},initEvents:function(){$(document).on("template.registered",function(e,t){"infos"===t.id&&app.core.ui.applyTemplate(t.id,t.data)}).on("click",".tap-target button.understood",function(e){var t=$(this).closest(".tap-target");app.featureDiscovery.hideFeatureDiscovery(t.attr("id"),!0)}).on("click",".tap-target",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),$(e.currentTarget).is("button")||$(e.currentTarget).tapTarget("close")}).on("ctrl.beforego, content.cleared",function(){app.featureDiscovery.hideFeatureDiscovery()}).on("ctrl.aftergo, history.popedstate, ctrl.postrender",function(){})},showFeatureDiscovery:function(e){var t=$(".tap-target");isDefined(e)&&(t=t.filter("#"+e)),t.each(function(){var e=$(this).attr("id");app.featureDiscovery.__getInfosStorage().hasOwnProperty(e)||t.tapTarget("open")})},hideFeatureDiscovery:function(e,t){var a=null;a=isDefined(e)?$("#"+e):$(".tap-target"),isDefined(t)&&t&&app.featureDiscovery.__setInfosStorage(e),a.tapTarget("close")},__getInfosStorage:function(){var e=localStorage.getItem(app.config.clientSessionName+"_infos");return null===e&&(e="{}"),JSON.parse(e)},__setInfosStorage:function(e){var t=app.featureDiscovery.__getInfosStorage();t[e]=e,localStorage.setItem(app.config.clientSessionName+"_infos",JSON.stringify(t))},__resetInfosStorage:function(){localStorage.setItem(app.config.clientSessionName+"_infos","{}")}},ctrl:{updateSettings:function(e){!0===e.clearAllInfosMessages&&app.featureDiscovery.__resetInfosStorage(),app.core.ui.toast("Paramètres enregistrés","success"),app.ctrl.homeAction()}}});